<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
        PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="es"
      xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core">

<h:head>
    <title>INKALOTO - Tragamonedas</title>
    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <!-- Igual que cargarsaldo.xhtml -->
    <link href="css/style.css" rel="stylesheet" type="text/css"/>
</h:head>

<h:body>

<!-- =============== TOPBAR (TU ENCABEZADO) =============== -->
<header class="topbar">
    <div class="container nav-slim">
        <!-- Logo / inicio -->
        <a href="#{request.contextPath}/index.xhtml" class="brand">INKALOTO</a>

        <div class="nav-slim-right">
            <!-- üîî ahora puedes usar el total de no le√≠das en ESTA p√°gina -->
            <a href="#{request.contextPath}/notificaciones.xhtml"
                class="notif-icon"
                title="Notificaciones">
                 üîî
                 <span id="notifCount" class="notif-badge">
                     #{notificacionesBean.cantidadNoLeidas}
                 </span>
             </a>
            <!-- Cargar saldo -->
            <a href="#{request.contextPath}/cargarsaldo.xhtml" class="btn btn-dark pill">+ Cargar saldo</a>

            <!-- Saldo -->
            <span class="balance-mini">
                S/ <strong>#{miCuentaBean.billetera.saldoActual}</strong>
            </span>

            <!-- Men√∫ de usuario -->
            <div class="select user-select">
                <select id="userMenu" onchange="cambiarPagina(this)">
                    <option value="">
                        #{loginBean.usuarioLogueado != null ? loginBean.usuarioLogueado.nombres : 'Usuario'}
                    </option>
                    <option value="#{request.contextPath}/micuenta.xhtml">Mi cuenta</option>
                    <option value="#{request.contextPath}/historialtransacciones.xhtml">Movimientos</option>
                    <option value="#{request.contextPath}/historialjugada.xhtml">Historial de jugadas</option>
                    <option value="#{request.contextPath}/historialpremios.xhtml">Premios</option>
                    <option value="#{request.contextPath}/notificaciones.xhtml">Notificaciones</option>
                    <option value="#{request.contextPath}/retiro.xhtml">Retirar premios</option>
                </select>
            </div>
                                    <!-- Cerrar sesi√≥n -->
                                    <h:form style="display:inline;">
                    <h:commandButton value="Cerrar sesi√≥n"
                                     action="#{loginBean.logout}"
                                     styleClass="btn-logout" />
                </h:form>
        </div>
    </div>
</header>


<!-- =============== CONTENIDO PRINCIPAL =============== -->
<main class="panel">
    <div class="panel-inner">

        <h1>Tragamonedas <span class="accent">en l√≠nea</span></h1>
        <p class="hint">
            Haz clic en ‚ÄúGirar‚Äù y prueba tu suerte üé∞
        </p>

        <!-- Info de apuesta y premios -->
        <div class="info-box">
            <p>Apuesta por giro: <strong>S/ #{tragamonedasBean.costoJuego}</strong></p>
            <p>Premio normal (3 s√≠mbolos iguales): <strong>S/ #{tragamonedasBean.premioNormal}</strong></p>
            <p>Premio especial (3 ‚≠ê): <strong>S/ #{tragamonedasBean.premioEstrella}</strong></p>
        </div>

        <!-- Mensajes del bean -->
        <h:panelGroup rendered="#{not empty tragamonedasBean.mensajeError}">
            <div class="alert alert-error">
                #{tragamonedasBean.mensajeError}
            </div>
        </h:panelGroup>

        <h:panelGroup rendered="#{not empty tragamonedasBean.mensajeExito}">
            <div class="alert alert-success">
                #{tragamonedasBean.mensajeExito}
            </div>
        </h:panelGroup>

        <!-- Display de los 3 s√≠mbolos -->
        <div class="slot-display">
            <span class="slot-icon">#{tragamonedasBean.r1}</span>
            <span class="slot-icon">#{tragamonedasBean.r2}</span>
            <span class="slot-icon">#{tragamonedasBean.r3}</span>
        </div>

        <h:form>
            <div class="actions-row">
                <h:commandButton value="Girar üé∞"
                                 action="#{tragamonedasBean.jugar}"
                                 styleClass="btn-gold-lg"/>
            </div>
        </h:form>

    </div>
</main>

<footer class="footer">
    ¬© 2025 INKALOTO ‚Äî Tragamonedas.
</footer>

<style>
    .slot-display {
        display: flex;
        justify-content: center;
        gap: 30px;
        font-size: 60px;
        margin: 25px 0;
    }
    .slot-icon {
        padding: 20px;
        border-radius: 15px;
        background: #222;
        box-shadow: 0 0 10px rgba(255,255,255,0.1);
    }
    .info-box {
        max-width: 420px;
        margin: 0 auto 20px auto;
        padding: 12px 18px;
        border-radius: 12px;
        background: #1f1f24;
        color: #f5f5f5;
        font-size: 0.9rem;
        line-height: 1.5;
    }
</style>
<script src="jsp/comprobante.js" type="text/javascript"></script>
</h:body>
</html>
